<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IT Тест — RU / EN</title>
  <style>
    body { font-family: Arial, sans-serif; background: linear-gradient(135deg,#eef4ff,#e8f0ff); margin:0; padding:24px; color:#222; display:flex; flex-direction:column; align-items:center; }
    header { width:100%; max-width:900px; display:flex; justify-content:space-between; align-items:center; gap:12px; }
    h1 { margin:6px 0; font-size:1.4rem; }
    .lang-buttons button { padding:8px 14px; border-radius:8px; border:none; cursor:pointer; background:#4a6cf7; color:#fff; font-weight:600; margin-left:6px; }
    main { width:100%; max-width:900px; margin-top:16px; }
    .question { background:#fff; padding:14px; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.06); margin-bottom:12px; text-align:left; }
    .question h3 { margin:0 0 8px; font-size:1rem; }
    .answers label { display:block; margin:6px 0; cursor:pointer; padding:6px 8px; border-radius:6px; }
    .answers input { margin-right:8px; }
    .controls { display:flex; gap:10px; justify-content:center; margin-top:12px; }
    button.action { padding:10px 18px; border-radius:10px; border:none; background:#4a6cf7; color:#fff; font-weight:700; cursor:pointer; }
    .result { margin-top:16px; text-align:center; font-weight:700; }
    .progress { width:100%; max-width:440px; height:28px; background:#ddd; border-radius:14px; overflow:hidden; margin:12px auto 0; }
    .progress-bar { height:100%; line-height:28px; text-align:center; color:#fff; font-weight:700; width:0%; }
    .label-correct { background: rgba(46,204,113,0.12); border-left:4px solid #2ecc71; }
    .label-wrong { background: rgba(231,76,60,0.08); border-left:4px solid #e74c3c; }
    footer { margin-top:28px; color:#666; font-size:0.9rem; }
  </style>
</head>
<body>
  <header>
    <h1 id="title">IT Тест</h1>
    <div class="lang-buttons">
      <button id="btn-ru" type="button">RU</button>
      <button id="btn-en" type="button">EN</button>
    </div>
  </header>

  <main>
    <form id="quizForm" autocomplete="off"></form>

    <div class="controls">
      <button id="checkBtn" class="action" type="button">Проверить / Check</button>
      <button id="restartBtn" class="action" type="button">Перемешать</button>
    </div>

    <div id="result" class="result" aria-live="polite"></div>
    <div class="progress" aria-hidden="true"><div id="progressBar" class="progress-bar"></div></div>
  </main>

  <footer>Вопросов: <span id="qCount">15</span>. Вопросы перемешиваются при (re)load или при нажатии "Перемешать".</footer>

<script>
/* Полный набор вопросов с RU + EN */
const QUESTIONS = [
  {
    ru: { q: "Что означает аббревиатура CPU?", a: ["Central Processing Unit","Central Power Unit","Computer Personal Unit","Core Program Utility"], correct: 0 },
    en: { q: "What does CPU stand for?", a: ["Central Processing Unit","Central Power Unit","Computer Personal Unit","Core Program Utility"], correct: 0 }
  },
  {
    ru: { q: "Какой порт по умолчанию использует HTTP?", a: ["21","80","443","25"], correct: 1 },
    en: { q: "Which port does HTTP use by default?", a: ["21","80","443","25"], correct: 1 }
  },
  {
    ru: { q: "Что такое алгоритм?", a: ["Набор инструкций для решения задачи","Программное обеспечение","Процессор","Сеть"], correct: 0 },
    en: { q: "What is an algorithm?", a: ["A set of instructions to solve a problem","Software","Processor","Network"], correct: 0 }
  },
  {
    ru: { q: "Какая структура данных работает по принципу LIFO?", a: ["Очередь","Стек","Список","Массив"], correct: 1 },
    en: { q: "Which data structure works by LIFO principle?", a: ["Queue","Stack","List","Array"], correct: 1 }
  },
  {
    ru: { q: "Как называется протокол для безопасного веб-трафика?", a: ["HTTP","HTTPS","FTP","SMTP"], correct: 1 },
    en: { q: "What is the protocol for secure web traffic?", a: ["HTTP","HTTPS","FTP","SMTP"], correct: 1 }
  },
  {
    ru: { q: "Что такое IP-адрес?", a: ["Уникальный идентификатор устройства в сети","Имя пользователя","Тип памяти","Сетевой кабель"], correct: 0 },
    en: { q: "What is an IP address?", a: ["A unique identifier of a device in a network","Username","Type of memory","Network cable"], correct: 0 }
  },
  {
    ru: { q: "Какая команда в Python выводит текст?", a: ["echo","printf","print","show"], correct: 2 },
    en: { q: "Which command in Python outputs text?", a: ["echo","printf","print","show"], correct: 2 }
  },
  {
    ru: { q: "Что означает SQL?", a: ["Structured Query Language","System Question Language","Super Quick Logic","Simple Query List"], correct: 0 },
    en: { q: "What does SQL stand for?", a: ["Structured Query Language","System Question Language","Super Quick Logic","Simple Query List"], correct: 0 }
  },
  {
    ru: { q: "Какой тип IP-адреса поддерживает больше всего устройств?", a: ["IPv4","IPv6","MAC","DNS"], correct: 1 },
    en: { q: "Which IP type supports the most devices?", a: ["IPv4","IPv6","MAC","DNS"], correct: 1 }
  },
  {
    ru: { q: "Что делает оператор == в программировании?", a: ["Присваивает значение","Сравнивает значения","Удаляет значение","Создает переменную"], correct: 1 },
    en: { q: "What does the operator == do in programming?", a: ["Assigns a value","Compares values","Deletes a value","Creates a variable"], correct: 1 }
  },
  {
    ru: { q: "Какая ОС является открытой и бесплатной?", a: ["Windows","Linux","macOS","iOS"], correct: 1 },
    en: { q: "Which OS is open-source and free?", a: ["Windows","Linux","macOS","iOS"], correct: 1 }
  },
  {
    ru: { q: "Что такое HTML?", a: ["Язык гипертекстовой разметки","Язык программирования","Протокол передачи данных","Операционная система"], correct: 0 },
    en: { q: "What is HTML?", a: ["HyperText Markup Language","Programming language","Data transfer protocol","Operating system"], correct: 0 }
  },
  {
    ru: { q: "Что означает LAN?", a: ["Local Access Number","Large Area Network","Local Area Network","Long Access Node"], correct: 2 },
    en: { q: "What does LAN stand for?", a: ["Local Access Number","Large Area Network","Local Area Network","Long Access Node"], correct: 2 }
  },
  {
    ru: { q: "Какой язык используется для стилизации веб-страниц?", a: ["HTML","CSS","Python","SQL"], correct: 1 },
    en: { q: "Which language is used for styling web pages?", a: ["HTML","CSS","Python","SQL"], correct: 1 }
  },
  {
    ru: { q: "Что такое Git?", a: ["Система контроля версий","Язык программирования","Вирус","Сеть"], correct: 0 },
    en: { q: "What is Git?", a: ["Version control system","Programming language","Virus","Network"], correct: 0 }
  }
];

/* Состояние */
let lang = 'ru';
let shuffled = [];

/* Fisher-Yates shuffle */
function shuffleArray(arr) {
  const a = arr.slice();
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function setLanguage(l) {
  lang = l === 'en' ? 'en' : 'ru';
  document.getElementById('title').textContent = (lang === 'ru' ? 'IT Тест' : 'IT Quiz');
  renderQuiz(); // при смене языка перерисовать (и перемешать)
}

function renderQuiz() {
  shuffled = shuffleArray(QUESTIONS); // перемешиваем при рендере (требование)
  const form = document.getElementById('quizForm');
  form.innerHTML = '';

  shuffled.forEach((qObj, idx) => {
    const q = qObj[lang];
    const wrapper = document.createElement('div');
    wrapper.className = 'question';
    wrapper.dataset.index = idx;

    const qTitle = document.createElement('h3');
    qTitle.innerHTML = `${idx + 1}. ${q.q}`;
    wrapper.appendChild(qTitle);

    const answersDiv = document.createElement('div');
    answersDiv.className = 'answers';

    q.a.forEach((ansText, aIndex) => {
      const id = `q${idx}_a${aIndex}`;
      const label = document.createElement('label');
      label.htmlFor = id;
      label.innerHTML = `<input type="radio" name="q${idx}" id="${id}" value="${aIndex}"> ${ansText}`;
      answersDiv.appendChild(label);
    });

    wrapper.appendChild(answersDiv);
    form.appendChild(wrapper);
  });

  // очистка результата и прогресс-бара
  document.getElementById('result').textContent = '';
  const bar = document.getElementById('progressBar');
  bar.style.width = '0%'; bar.textContent = '';
  document.getElementById('qCount').textContent = shuffled.length;
  document.getElementById('checkBtn').disabled = false;
}

function checkAnswers() {
  let correctCount = 0;

  shuffled.forEach((qObj, idx) => {
    const correctIndex = qObj[lang].correct;
    const chosen = document.querySelector(`input[name="q${idx}"]:checked`);
    const chosenIndex = chosen ? parseInt(chosen.value, 10) : null;

    const labels = Array.from(document.querySelectorAll(`div.question[data-index="${idx}"] .answers label`));
    labels.forEach((label, aIdx) => {
      label.classList.remove('label-correct', 'label-wrong');
      if (aIdx === correctIndex) label.classList.add('label-correct');
      if (chosenIndex !== null && aIdx === chosenIndex && aIdx !== correctIndex) label.classList.add('label-wrong');
    });

    if (chosenIndex === correctIndex) correctCount++;
  });

  const total = shuffled.length;
  const percent = Math.round((correctCount / total) * 100);
  const resultText = (lang === 'ru')
    ? `Правильных ответов: ${correctCount}/${total} (${percent}%)`
    : `Correct answers: ${correctCount}/${total} (${percent}%)`;

  document.getElementById('result').textContent = resultText;

  const bar = document.getElementById('progressBar');
  bar.style.width = percent + '%';
  bar.textContent = percent + '%';
  if (percent >= 75) bar.style.background = '#2ecc71';
  else if (percent >= 50) bar.style.background = '#f39c12';
  else bar.style.background = '#e74c3c';

  // блокируем возможность менять ответы после проверки
  document.querySelectorAll('#quizForm input').forEach(i => i.disabled = true);
  document.getElementById('checkBtn').disabled = true;
}

document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('btn-ru').addEventListener('click', () => setLanguage('ru'));
  document.getElementById('btn-en').addEventListener('click', () => setLanguage('en'));
  document.getElementById('checkBtn').addEventListener('click', checkAnswers);
  document.getElementById('restartBtn').addEventListener('click', renderQuiz);
  setLanguage('ru');
});

// на всякий случай экспортируем в глобальный объект (если где-то ожидают)
window.setLanguage = setLanguage;
</script>
</body>
</html>